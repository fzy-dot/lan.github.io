(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["plugins-pick-search-search"],{"0b6f":function(t,e,i){"use strict";var a=i("4ea4");i("8e6e"),i("456d"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("ac6a");var o=a(i("2909"));i("96cf");var n=a(i("1da1")),r=a(i("ade3")),s=i("2f62");function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function d(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(Object(i),!0).forEach((function(e){(0,r.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var u={name:"search",data:function(){return{list:[],keyword:"",activity:{},historyList:[],isSearch:!1,page:1}},onLoad:function(){this.$commonLoad.onload(),this.historyList=this.getHistory()},computed:d(d({},(0,s.mapState)({appImg:function(t){return t.mallConfig.__wxapp_img.mall},appSetting:function(t){return t.mallConfig.mall.setting}})),(0,s.mapGetters)("mallConfig",{getTheme:"getTheme"})),onReachBottom:function(){this.page++,this.getList()},methods:{navigator:function(t){uni.navigateTo({url:t})},search:function(){var t=this.keyword;""!==t&&(this.keyword=t.trim(),this.reset())},reset:function(){this.page=1,this.getGoodsList()},getList:function(){var t=(0,n.default)(regeneratorRuntime.mark((function t(){var e,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$request({url:this.$api.pick.goods_list,method:"get",data:{keyword:this.keyword,page:this.page}});case 2:e=t.sent,0===e.code&&(a=e.data.list,(i=this.list).push.apply(i,(0,o.default)(a)));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getGoodsList:function(){var t=(0,n.default)(regeneratorRuntime.mark((function t(){var e,i,a,o,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$request({url:this.$api.pick.goods_list,method:"get",data:{keyword:this.keyword,page:this.page}});case 2:e=t.sent,0===e.code&&(i=e.data,a=i.bg_url,o=i.list,n=i.form,r=i.activity,this.isSearch=!0,this.list=o,this.background=a,this.form=n,this.activity=r,this.setHistory());case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),setHistory:function(){var t=this.getHistory(),e=this.keyword.trim();t.forEach((function(i,a){i.keyword===e&&t.splice(a,1)})),t.push({keyword:e}),t.length>20&&t.shift(),this.historyList=t,this.$storage.setStorageSync("SEARCH_HISTORY_LIST",t)},getHistory:function(){var t=this.$storage.getStorageSync("SEARCH_HISTORY_LIST");return t||(t=[]),t},deleteHistory:function(){this.$storage.removeStorageSync("SEARCH_HISTORY_LIST"),this.historyList=[]},cancel:function(){this.isSearch=!1,this.keyword="",this.list=[]},historyClick:function(t){this.keyword=t.trim(),this.reset()},deleteKeyword:function(){this.keyword=""}},watch:{keyword:{handler:function(t){""==t&&this.cancel()},immediate:!0}}};e.default=u},"1b39":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("app-layout",[i("v-uni-view",{staticClass:"search"},[i("v-uni-view",{staticClass:"search-input dir-left-nowrap cross-center main-center"},[i("v-uni-input",{staticClass:"input",attrs:{type:"text",focus:!0},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.search.apply(void 0,arguments)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),i("v-uni-text",{staticClass:"search-text",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.search.apply(void 0,arguments)}}},[t._v("搜索")]),t.keyword.length>0?i("v-uni-image",{staticClass:"delete",attrs:{src:"/static/image/icon/delete-yuan.png"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.deleteKeyword.apply(void 0,arguments)}}}):t._e()],1),!t.isSearch&&t.historyList.length>0?i("v-uni-view",{staticClass:"history"},[i("v-uni-view",{staticClass:"dir-left-nowrap cross-center title"},[i("v-uni-view",{staticClass:"box-grow-1"},[t._v("历史搜索")]),i("v-uni-image",{staticClass:"box-grow-0",attrs:{src:"/static/image/icon/delete.png"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.deleteHistory.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"dir-left-wrap history-list"},t._l(t.historyList,(function(e,a){return i("v-uni-view",{key:a,staticClass:"box-grow-0 cross-center item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.historyClick(e.keyword)}}},[t._v(t._s(e.keyword))])})),1)],1):t._e(),i("v-uni-view",{staticClass:"list"},[t._l(t.list,(function(e){return i("v-uni-view",{key:e.id,staticClass:"item dir-left-nowrap",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.navigator("/plugins/pick/detail/detail?goods_id="+e.id)}}},[0==e.goods_stock?i("v-uni-view",{staticClass:"out-dialog"},[i("v-uni-image",{attrs:{src:"1"==t.appSetting.is_use_stock?t.appImg.plugins_out:t.appSetting.sell_out_pic}})],1):t._e(),i("v-uni-image",{staticClass:"image",attrs:{src:e.cover_pic}}),i("v-uni-view",{staticClass:"content dir-top-nowrap main-between"},[i("v-uni-text",{staticClass:"name t-omit-two"},[t._v(t._s(e.name))]),i("v-uni-view",{staticClass:"information dir-left-nowrap main-between cross-bottom"},[i("v-uni-view",{staticClass:"num"},[i("v-uni-view",{staticClass:"value"},[i("v-uni-text",{staticClass:"price",style:{color:t.getTheme.color}},[t._v("￥"+t._s(e.price))]),i("v-uni-text",{staticClass:"original_price"},[t._v("￥"+t._s(e.original_price))])],1),i("v-uni-text",{staticClass:"sales"},[t._v(t._s(e.sales))])],1),i("v-uni-view",[i("v-uni-view",{staticClass:"go-button",style:{"background-color":t.getTheme.background}},[t._v("去凑单")])],1)],1)],1)],1)})),t.isSearch?i("v-uni-view",{staticClass:"goods-list"},[t.list.length<=0?[i("v-uni-view",{staticClass:"main-center no-result"},[i("v-uni-view",{staticClass:"dir-left-nowrap cross-center"},[i("v-uni-image",{staticClass:"box-grow-0 empty",attrs:{src:"/static/image/icon/empty.png"}}),i("v-uni-view",{staticClass:"box-grow-1"},[i("v-uni-view",[t._v("抱歉，没有相关商品")])],1)],1)],1)]:t._e()],2):t._e()],2)],1)],1)},n=[]},2909:function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return c}));var a=i("6b75");function o(t){if(Array.isArray(t))return Object(a["a"])(t)}function n(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var r=i("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return o(t)||n(t)||Object(r["a"])(t)||s()}},"71bc":function(t,e,i){var a=i("791c");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("05af2474",a,!0,{sourceMap:!1,shadowMode:!1})},"791c":function(t,e,i){e=t.exports=i("24fb")(!1),e.push([t.i,'@charset "UTF-8";.text-center[data-v-180b1022]{text-align:center}.font-weight[data-v-180b1022]{font-weight:700}.page-width[data-v-180b1022]{width:100%}.goods-hover-class[data-v-180b1022]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-180b1022]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}\n/*全局文字大小*/\n/* 屏幕宽度*/uni-page-body[data-v-180b1022]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-180b1022]{width:100%}.u-hover-class[data-v-180b1022]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-180b1022]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.search[data-v-180b1022]{position:absolute;width:100%;height:100%}.search-input[data-v-180b1022]{width:%?750?%;height:%?105?%;background-color:#efeff4;position:fixed;top:0}.input[data-v-180b1022]{height:%?64?%;width:%?620?%;background-color:#fff;border-radius:%?36?%;padding:0 %?36?%}.search-text[data-v-180b1022]{font-size:%?32?%;margin-left:%?20?%}.list[data-v-180b1022]{padding-bottom:%?96?%;margin-top:%?105?%}.item[data-v-180b1022]{padding:%?24?%;border-bottom:%?1?% solid #eee;background-color:#fff;position:relative}.item .out-dialog[data-v-180b1022]{width:%?220?%;height:%?220?%;border-radius:%?16?%;position:absolute;top:%?24?%;left:%?24?%;z-index:10;background-color:rgba(0,0,0,.5)}.item .out-dialog uni-image[data-v-180b1022]{width:%?220?%;height:%?220?%;border-radius:%?16?%}.image[data-v-180b1022]{width:%?220?%;height:%?220?%;border-radius:%?16?%;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.content[data-v-180b1022]{width:%?478?%;margin-left:%?24?%;height:%?228?%}.name[data-v-180b1022]{font-size:%?28?%;color:#353535}.generate[data-v-180b1022]{position:fixed;bottom:0;height:%?96?%;width:%?750?%;background-color:#fff;border-top:%?1?% solid #e2e2e2}.generate-img[data-v-180b1022]{width:%?34?%;height:%?34?%;margin-right:%?7.5?%}.generate-text[data-v-180b1022]{margin-left:%?7.5?%;font-size:%?32?%;color:#ff4d4c}.information[data-v-180b1022]{margin-bottom:%?12?%}.num[data-v-180b1022]{margin-bottom:%?8?%}.sales[data-v-180b1022]{font-size:%?24?%;color:#999;line-height:1}.value[data-v-180b1022]{margin-bottom:%?18?%;line-height:1}.price[data-v-180b1022]{font-size:%?32?%;line-height:1}.original_price[data-v-180b1022]{text-decoration:line-through;font-size:%?24?%;line-height:1;color:#999;margin-left:%?10?%}.go-button[data-v-180b1022]{height:%?56?%;line-height:%?56?%;width:%?130?%;font-size:%?28?%;border-radius:%?28?%;text-align:center;color:#fff}.history[data-v-180b1022]{padding:%?36?% %?24?%;border-radius:%?16?% %?16?% 0 0;background-color:#fff;font-size:%?28?%;margin-top:%?105?%}.history .title[data-v-180b1022]{padding-bottom:%?24?%;color:#666}.history .title uni-image[data-v-180b1022]{width:%?28?%;height:%?34?%;display:block}.history .history-list .item[data-v-180b1022]{height:%?64?%;background-color:#f7f7f7;padding:0 %?20?%;margin-right:%?20?%;margin-bottom:%?16?%;border-radius:%?32?%}.delete[data-v-180b1022]{width:%?32?%;height:%?32?%;position:absolute;right:%?122?%;top:%?36?%;border-radius:50%;z-index:1500}.goods-list .no-result[data-v-180b1022]{height:%?156?%;padding:%?28?% 0;font-size:%?28?%;background-color:#fff}.goods-list .no-result .empty[data-v-180b1022]{width:%?100?%;height:%?100?%;display:block;margin-right:%?40?%}body.?%PAGE?%[data-v-180b1022]{background:#f7f7f7}',""])},"911e":function(t,e,i){"use strict";var a=i("71bc"),o=i.n(a);o.a},c4f0:function(t,e,i){"use strict";i.r(e);var a=i("0b6f"),o=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=o.a},c5a3:function(t,e,i){"use strict";i.r(e);var a=i("1b39"),o=i("c4f0");for(var n in o)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(n);i("911e");var r,s=i("f0c5"),c=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,"180b1022",null,!1,a["a"],r);e["default"]=c.exports}}]);