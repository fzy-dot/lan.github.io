(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["plugins-mch-mch-qrcode-qrcode"],{"0769":function(t,e,i){"use strict";i.r(e);var o=i("0da5"),r=i.n(o);for(var n in o)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(n);e["default"]=r.a},"0da5":function(t,e,i){"use strict";var o=i("4ea4");i("8e6e"),i("ac6a"),i("456d"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var r=o(i("1da1")),n=o(i("ade3")),a=i("2f62");function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(Object(i),!0).forEach((function(e){(0,n.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var d={name:"qrcode",computed:s({},(0,a.mapGetters)("mallConfig",{getTheme:"getTheme"})),watch:{"editForm.shop_info_top":function(){var t=this;this.$nextTick((function(e){var i;function o(){return new Promise((function(t){i.select("#calcImage").boundingClientRect((function(e){t(e.top)})).exec((function(e){t(e.top)}))}))}function n(){return new Promise((function(t){i.select("#content").boundingClientRect((function(e){t(e.top)})).exec((function(e){t(e.top)}))}))}i=uni.createSelectorQuery();var a=t;function c(){return s.apply(this,arguments)}function s(){return s=(0,r.default)(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o();case 2:return e=t.sent,t.next=5,n();case 5:i=t.sent,a.calcHeight=(e-i>uni.upx2px(580)?e-i-uni.upx2px(580):0)+"px",console.log(e,i,e-i,a.calcHeight);case 8:case"end":return t.stop()}}),t)}))),s.apply(this,arguments)}c()}))}},data:function(){return{calcHeight:0,mch:{},editForm:{},mch_id:0}},onLoad:function(t){this.$commonLoad.onload(t);var e=this;e.mch_id=t.mch_id,e.$request({url:e.$api.mch.self_poster,data:{mch_id:e.mch_id}}).then((function(t){0===t.code?(e.editForm=t.data.config,e.mch=t.data.mch):uni.showToast({title:t.msg,icon:"none"})}))},methods:{savePoster:function(){var t=this;this.$showLoading({text:"生成中"}),this.$request({url:this.$api.mch.self_save_poster,data:{pic_url:this.editForm.card_pic,mch_id:this.mch_id}}).then((function(e){t.$hideLoading(),0===e.code?t.$utils.batchSave(e.data.pic_url).then((function(t){uni.showToast({title:"保存成功"})})):uni.showToast({title:e.msg,icon:"none"})})).catch((function(){t.$hideLoading()}))}}};e.default=d},"4e11":function(t,e,i){"use strict";var o;i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return o}));var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("app-layout",[i("v-uni-view",[i("v-uni-view",{staticClass:"select-box"},[i("v-uni-view",{staticClass:"bg",style:"image"===t.editForm.bg_default?"filter: blur(10px);background-image: url( "+t.editForm.card_pic+")":"background-color: "+t.editForm.bg_color}),i("v-uni-view",{staticClass:"dir-top-nowrap cross-center",staticStyle:{position:"relative"}},[i("v-uni-view",{staticClass:"s-n-bg",attrs:{id:"content"}},[1==t.editForm.is_card?i("v-uni-image",{attrs:{src:t.editForm.card_pic}}):t._e()],1),1==t.editForm.is_shop&&t.mch.store?i("v-uni-view",{staticClass:"dir-top-nowrap main-center cross-center",staticStyle:{position:"absolute","z-index":"3"},style:{top:t.editForm.shop_info_top+104+"rpx"}},[1==t.editForm.logo_show?i("v-uni-image",{staticClass:"s-n-avatar",attrs:{src:t.mch.store.cover_url}}):t._e(),1==t.editForm.shop_name_show?i("v-uni-view",{staticClass:"s-n-shopname t-omit"},[t._v(t._s(t.mch.store.name))]):t._e(),i("v-uni-image",{staticClass:"s-n-img",attrs:{id:"calcImage",src:t.editForm.line_pic}})],1):t._e(),"left"===t.editForm.code_pos?[i("v-uni-view",{staticClass:"dir-top-nowrap",staticStyle:{width:"652rpx",background:"#FFFFFF","border-radius":"32rpx",position:"relative","margin-top":"-40rpx"}},[i("v-uni-view",{staticClass:"dir-left-nowrap main-between cross-center",staticStyle:{width:"100%",padding:"20rpx 30rpx"},style:{marginTop:""+t.calcHeight}},[i("v-uni-view",{staticClass:"dir-top-nowrap",staticStyle:{"text-align":"left"}},[i("v-uni-view",{staticStyle:{"font-size":"32rpx",color:"#000000"}},[t._v(t._s(t.editForm.code_title))]),i("v-uni-view",{staticStyle:{"font-size":"24rpx",color:"#999999"},style:{paddingTop:t.editForm.code_title_padding+"rpx"}},[t._v(t._s(t.editForm.code_sub_title))])],1),i("v-uni-image",{style:{height:t.editForm.code_size+"rpx",width:t.editForm.code_size+"rpx"},attrs:{src:t.editForm.customize_poster}})],1)],1)]:t._e(),"center"===t.editForm.code_pos?[i("v-uni-view",{staticClass:"dir-top-nowrap",staticStyle:{width:"652rpx",background:"#FFFFFF","border-radius":"32rpx",position:"relative","margin-top":"-40rpx"}},[i("v-uni-view",{staticStyle:{width:"100%",padding:"20rpx 0","text-align":"center"},style:{marginTop:""+t.calcHeight},attrs:{flex:"dir:top main:center cross:center"}},[i("v-uni-image",{style:{height:t.editForm.code_size+"rpx",width:t.editForm.code_size+"rpx"},attrs:{src:t.editForm.customize_poster}}),i("v-uni-view",{staticStyle:{"font-size":"32rpx",color:"#000000"}},[t._v(t._s(t.editForm.code_title))]),i("v-uni-view",{staticStyle:{"font-size":"24rpx",color:"#999999","padding-top":"12rpx"}},[t._v(t._s(t.editForm.code_sub_title))])],1)],1)]:t._e(),"right"===t.editForm.code_pos?[i("v-uni-view",{staticClass:"dir-top-nowrap",staticStyle:{width:"652rpx",background:"#FFFFFF","border-radius":"32rpx",position:"relative","margin-top":"-40rpx"}},[i("v-uni-view",{staticClass:"dir-left-nowrap cross-center",staticStyle:{width:"100%",padding:"20rpx 30rpx"},style:{marginTop:""+t.calcHeight}},[i("v-uni-image",{style:{height:t.editForm.code_size+"rpx",width:t.editForm.code_size+"rpx"},attrs:{src:t.editForm.customize_poster}}),i("v-uni-view",{staticClass:"dir-top-nowrap",staticStyle:{"text-align":"left","margin-left":"20rpx"}},[i("v-uni-view",{staticStyle:{"font-size":"32rpx",color:"#000000"}},[t._v(t._s(t.editForm.code_title))]),i("v-uni-view",{staticStyle:{"font-size":"24rpx",color:"#999999"},style:{paddingTop:t.editForm.code_title_padding+"rpx"}},[t._v(t._s(t.editForm.code_sub_title))])],1)],1)],1)]:t._e()],2),i("v-uni-view",{staticClass:"main-center cross-center self-poster-btn",style:{background:1==t.editForm.btn_theme?t.getTheme.color:t.editForm.btn_bg},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.savePoster.apply(void 0,arguments)}}},[t._v(t._s(t.editForm.btn_title))])],1)],1)],1)},n=[]},"7f61":function(t,e,i){"use strict";var o=i("b6b1"),r=i.n(o);r.a},ac03:function(t,e,i){e=t.exports=i("24fb")(!1),e.push([t.i,'@charset "UTF-8";.text-center[data-v-5d3333c8]{text-align:center}.font-weight[data-v-5d3333c8]{font-weight:700}.page-width[data-v-5d3333c8]{width:100%}.goods-hover-class[data-v-5d3333c8]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-5d3333c8]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}\n/*全局文字大小*/\n/* 屏幕宽度*/uni-page-body[data-v-5d3333c8]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-5d3333c8]{width:100%}.u-hover-class[data-v-5d3333c8]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-5d3333c8]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.select-box[data-v-5d3333c8]{position:relative;min-height:100vh;height:100%;width:100vw;top:0;text-align:center}.select-box .s-n-bg[data-v-5d3333c8]{height:%?652?%;width:%?652?%;border-radius:%?32?% %?32?% 0 0;margin-top:%?104?%;overflow:hidden}.select-box .s-n-bg uni-image[data-v-5d3333c8]{height:100%;width:100%}.select-box .s-n-avatar[data-v-5d3333c8]{height:%?140?%;width:%?140?%;background:#d8d8d8;border-radius:50%;border:%?6?% solid #fff}.select-box .s-n-shopname[data-v-5d3333c8]{margin-top:%?20?%;color:#333;font-size:%?36?%;white-space:normal!important;max-width:%?625?%}.select-box .s-n-img[data-v-5d3333c8]{height:%?48?%;width:%?594?%;margin:0 auto}.select-box .bg[data-v-5d3333c8]{height:100%;width:100%;position:absolute;background-size:100% 100%;background-repeat:no-repeat}.select-box .self-poster-btn[data-v-5d3333c8]{width:%?652?%;height:%?100?%;font-size:%?32?%;position:relative;border-radius:%?50?%;color:#fff;margin:%?40?% auto 0}body.?%PAGE?%[data-v-5d3333c8]{background:#f7f7f7}',""])},b42e:function(t,e,i){"use strict";i.r(e);var o=i("4e11"),r=i("0769");for(var n in r)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return r[t]}))}(n);i("7f61");var a,c=i("f0c5"),s=Object(c["a"])(r["default"],o["b"],o["c"],!1,null,"5d3333c8",null,!1,o["a"],a);e["default"]=s.exports},b6b1:function(t,e,i){var o=i("ac03");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=i("4f06").default;r("7658e721",o,!0,{sourceMap:!1,shadowMode:!1})}}]);