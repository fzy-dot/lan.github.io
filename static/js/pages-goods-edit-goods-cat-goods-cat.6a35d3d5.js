(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-goods-edit-goods-cat-goods-cat"],{3299:function(t,e,i){"use strict";var a=i("aa3b"),n=i.n(a);n.a},7954:function(t,e,i){"use strict";i.r(e);var a=i("b10e"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},a5f5:function(t,e,i){e=t.exports=i("24fb")(!1),e.push([t.i,'@charset "UTF-8";.text-center[data-v-f0aee4dc]{text-align:center}.font-weight[data-v-f0aee4dc]{font-weight:700}.page-width[data-v-f0aee4dc]{width:100%}.goods-hover-class[data-v-f0aee4dc]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-f0aee4dc]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}\n/*全局文字大小*/\n/* 屏幕宽度*/uni-page-body[data-v-f0aee4dc]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-f0aee4dc]{width:100%}.u-hover-class[data-v-f0aee4dc]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-f0aee4dc]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.add-cat[data-v-f0aee4dc]{height:%?120?%;background-color:#fff;padding-top:%?24?%}.add-cat .add-cat-btn[data-v-f0aee4dc]{height:%?72?%;width:%?320?%;border-radius:%?36?%;border:%?2?% solid;margin:0 auto;font-size:%?26?%;line-height:%?72?%}.add-cat .add-cat-btn uni-image[data-v-f0aee4dc]{height:%?28?%;width:%?28?%;margin-right:%?12?%;margin-top:%?22?%}.cat-list[data-v-f0aee4dc]{background-color:#fff;padding:%?30?%;padding-left:0;padding-bottom:0}.cat-item[data-v-f0aee4dc]{width:auto;border-radius:%?33?%;padding-left:%?30?%;height:%?66?%;line-height:%?66?%;margin-left:%?30?%;margin-bottom:%?30?%}.cat-item .close[data-v-f0aee4dc]{width:%?60?%;height:%?66?%}.cat-item .close uni-image[data-v-f0aee4dc]{width:%?16?%;height:%?16?%;display:block}.title[data-v-f0aee4dc]{font-size:%?32?%;color:#999;padding-top:%?36?%;background-color:#fff;text-align:center}.add.iphone_x[data-v-f0aee4dc]{height:%?170?%;padding-bottom:%?50?%}.add[data-v-f0aee4dc]{height:%?120?%;padding:0 %?24?%;margin:0 auto;position:fixed;bottom:0;left:0;right:0;border-top:%?2?% solid #e2e2e2;background-color:#fff}.add .add-btn[data-v-f0aee4dc]{background-color:#fff;border:%?2?% solid}.add > uni-view[data-v-f0aee4dc]{height:%?80?%;width:%?300?%;margin-top:%?20?%;border-radius:%?40?%;color:#fff;font-size:%?28?%;text-align:center;line-height:%?80?%}.add > uni-view.all[data-v-f0aee4dc]{width:%?702?%}.dialog[data-v-f0aee4dc]{position:fixed;height:100%;width:100%;bottom:0;left:0;z-index:9999;background-color:rgba(0,0,0,.3)}.dialog.iphone_x .picker-list[data-v-f0aee4dc]{padding-bottom:%?50?%}.picker[data-v-f0aee4dc]{width:100%;height:%?440?%;color:#999}.dialog.iphone_x .picker[data-v-f0aee4dc]{height:%?490?%}.picker-list[data-v-f0aee4dc]{background-color:#fff;padding-top:%?20?%;position:fixed;bottom:0;left:0;width:100%;z-index:9999;height:%?520?%;border-top-left-radius:%?10?%;border-top-right-radius:%?10?%}.picker-header[data-v-f0aee4dc]{padding:0 %?24?%;font-size:%?32?%}.dialog[data-v-f0aee4dc]{position:fixed;height:100%;width:100%;bottom:0;left:0;z-index:9999;background-color:rgba(0,0,0,.3)}.picker-view[data-v-f0aee4dc]{height:34px;line-height:34px;text-align:center;font-size:%?32?%}uni-picker-view[data-v-f0aee4dc]{width:100%;height:%?440?%}body.?%PAGE?%[data-v-f0aee4dc]{background:#f7f7f7}',""])},aa3b:function(t,e,i){var a=i("a5f5");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("cc306c2a",a,!0,{sourceMap:!1,shadowMode:!1})},b10e:function(t,e,i){"use strict";function a(t,e){var i="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=n(t))||e&&t&&"number"===typeof t.length){i&&(t=i);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var d,c=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return c=t.done,t},e:function(t){s=!0,d=t},f:function(){try{c||null==i.return||i.return()}finally{if(s)throw d}}}}function n(t,e){if(t){if("string"===typeof t)return o(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}i("ac4d"),i("8a81"),i("5df3"),i("1c4c"),i("7f7f"),i("6b54"),i("87b3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var d={data:function(){return{iphone_x:!1,first:!0,third_show:!0,sec_show:!0,cat:[],sec_list:[],third_list:[],list:[],mch_id:null,dialog:!1,index_1:0,index_2:0,index_3:0,type:"",color:""}},computed:{catValue:function(){return[this.index_1,this.index_2,this.index_3]}},methods:{settingCat:function(){uni.navigateTo({url:"/pages/goods-edit/cat-setting/cat-setting?mch_id="+this.mch_id})},cancel:function(){this.dialog=!1,this.sec_list=[],this.third_list=[],this.index_1=0,this.index_2=0,this.index_3=0},toAdd:function(){var t,e=this,i=e.cat[e.index_1],n=e.sec_list[e.index_2],o=e.third_list[e.index_3];if(t="未选择"==n.label?i:"未选择"==o.label?n:o,e.list.length>0){var d,c=a(e.list);try{for(c.s();!(d=c.n()).done;){var s=d.value;if(s.value==t.value)return uni.showToast({title:"请勿重复添加",icon:"none",duration:1e3}),!1}}catch(l){c.e(l)}finally{c.f()}}setTimeout((function(){e.list.push(t),e.dialog=!1,e.index_1=0,e.index_2=0,e.index_3=0}))},getCat:function(){var t=this,e=0==this.mch_id?t.$api.app_admin.cat:"mall"==t.type?t.$api.mch.cat:t.$api.mch.mch_cat;t.$request({url:e,data:{mch_id:t.mch_id}}).then((function(e){if(t.$hideLoading(),uni.hideLoading(),t.first=!1,0==e.code){if(t.cat=e.data.list,t.list.length>0){var i=JSON.parse(JSON.stringify(t.list));t.list=[];var n,o=a(i);try{for(o.s();!(n=o.n()).done;){var d,c=n.value,s=a(t.cat);try{for(s.s();!(d=s.n()).done;){var l=d.value;if(c.value==l.value)t.list.push(c);else if(l.children){var r,h=a(l.children);try{for(h.s();!(r=h.n()).done;){var u=r.value;if(c.value==u.value)t.list.push(c);else if(u.children){var f,v=a(u.children);try{for(v.s();!(f=v.n()).done;){var g=f.value;c.value==g.value&&t.list.push(c)}}catch(_){v.e(_)}finally{v.f()}}}}catch(_){h.e(_)}finally{h.f()}}}}catch(_){s.e(_)}finally{s.f()}}}catch(_){o.e(_)}finally{o.f()}}}else uni.showToast({title:e.msg,icon:"none",duration:1e3})})).catch((function(e){t.$hideLoading(),uni.hideLoading()}))},delCat:function(t){this.list.splice(t,1)},bindChange:function(t){var e=this;(t.detail.value[0]<0||!t.detail.value[0])&&(t.detail.value[0]=0),e.index_1==t.detail.value[0]?e.index_2==t.detail.value[1]?e.index_3=+t.detail.value[2]:(e.index_2=+t.detail.value[1],e.third_list=[{label:"未选择",value:""}],e.sec_list[e.index_2].children&&(e.third_list=e.third_list.concat(e.sec_list[e.index_2].children)),setTimeout((function(){e.third_show=!0,e.index_3=0}))):(e.index_1=+t.detail.value[0],e.sec_list=[{label:"未选择",value:""}],e.third_list=[{label:"未选择",value:""}],e.cat[e.index_1].children&&(e.sec_list=e.sec_list.concat(e.cat[e.index_1].children),e.sec_list[0].children&&(e.third_list=e.third_list.concat(e.sec_list[0].children))),setTimeout((function(){e.sec_show=!0,e.index_2=0,e.third_show=!0,e.index_3=0})))},save:function(){0==this.mch_id?this.$storage.setStorageSync("goods_cat",this.list):"mall"==this.type?this.$storage.setStorageSync("mch_goods_cat",this.list):this.$storage.setStorageSync("mch_goods_mch_cat",this.list),setTimeout((function(){uni.navigateBack()}),500)},add:function(){if(0==this.cat.length)return uni.showToast({title:"暂无分类，请前往分类管理添加",icon:"none",duration:1e3}),!1;this.dialog=!0,this.sec_list=[{label:"未选择",value:""}],this.third_list=[{label:"未选择",value:""}],this.cat[0].children&&(this.sec_list=this.sec_list.concat(this.cat[0].children),this.sec_list[0].children&&(this.third_list=this.third_list.concat(this.sec_list[0].children)))}},onShow:function(){this.first||(uni.showLoading({mask:!0}),this.getCat())},onLoad:function(t){this.$commonLoad.onload(t);var e=this;e.$showLoading({type:"global",text:"加载中..."}),this.type=t.type?t.type:"",this.mch_id=t.mch_id?t.mch_id:0,this.color=t.mch_id?"#ff4544":"#446dfd",0==this.mch_id?this.list=this.$storage.getStorageSync("goods_cat")?this.$storage.getStorageSync("goods_cat"):[]:"mall"==this.type?this.list=this.$storage.getStorageSync("mch_goods_cat")?this.$storage.getStorageSync("mch_goods_cat"):[]:this.list=this.$storage.getStorageSync("mch_goods_mch_cat")?this.$storage.getStorageSync("mch_goods_mch_cat"):[],e.iphone_x=this.$utils.checkIphone(),e.getCat()}};e.default=d},c576:function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("app-layout",[t.list.length>0?i("v-uni-view",{staticClass:"dir-left-wrap cat-list"},t._l(t.list,(function(e,a){return i("v-uni-view",{key:e.value,staticClass:"cross-center dir-left-nowrap cat-item",style:{color:t.color,"background-color":0==t.mch_id?"#ECF0FF":"#FFECEC"}},[i("v-uni-view",[t._v(t._s(e.label))]),i("v-uni-view",{staticClass:"close cross-center main-center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.delCat(a)}}},[i("v-uni-image",{attrs:{src:0==t.mch_id?"./../image/cat-close.png":"./../image/mch-cat-close.png"}})],1)],1)})),1):t._e(),t.mch_id||0==t.mch_id?i("v-uni-view",{staticClass:"add-cat",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.add.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"add-cat-btn main-center",style:{"border-color":t.color,color:t.color}},[i("v-uni-image",{attrs:{src:0==t.mch_id?"./../image/add.png":"./../image/mch-add.png"}}),i("v-uni-view",[t._v("添加分类")])],1)],1):t._e(),i("v-uni-view",{class:["add main-between",t.iphone_x?"iphone_x":""]},["mall"==t.type&&t.mch_id>0?t._e():i("v-uni-view",{staticClass:"add-btn",style:{"border-color":t.color,color:t.color},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.settingCat.apply(void 0,arguments)}}},[t._v("分类管理")]),i("v-uni-view",{staticClass:"save-btn",class:{all:"mall"==t.type&&t.mch_id>0},style:{"background-color":t.color},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.save.apply(void 0,arguments)}}},[t._v("保存")])],1),t.dialog?i("v-uni-view",{staticClass:"dialog"},[i("v-uni-view",{staticClass:"picker-list"},[i("v-uni-view",{staticClass:"main-between picker-header",style:{color:t.color}},[i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel.apply(void 0,arguments)}}},[t._v("取消")]),i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toAdd.apply(void 0,arguments)}}},[t._v("新增")])],1),i("v-uni-picker-view",{attrs:{value:t.catValue,"indicator-style":"height: 34px;"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.bindChange.apply(void 0,arguments)}}},[i("v-uni-picker-view-column",t._l(t.cat,(function(e,a){return i("v-uni-view",{key:e.value,staticClass:"picker-view t-omit",style:{color:t.index_1==a?t.color:t.index_1==a+1||t.index_1==a-1?"#999999":t.index_1==a+2||t.index_1==a-2?"#cdcdcd":""}},[t._v(t._s(e.label))])})),1),i("v-uni-picker-view-column",t._l(t.sec_list,(function(e,a){return i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.sec_show||0==a,expression:"sec_show || idx == 0"}],key:e.value,staticClass:"picker-view t-omit",style:{color:t.index_2==a?t.color:t.index_2==a+1||t.index_2==a-1?"#999999":t.index_2==a+2||t.index_2==a-2?"#cdcdcd":""}},[t._v(t._s(e.label))])})),1),i("v-uni-picker-view-column",t._l(t.third_list,(function(e,a){return i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.third_show||0==a,expression:"third_show || idx == 0"}],key:e.value,staticClass:"picker-view t-omit",style:{color:t.index_3==a?t.color:t.index_3==a+1||t.index_3==a-1?"#999999":t.index_3==a+2||t.index_3==a-2?"#cdcdcd":""}},[t._v(t._s(e.label))])})),1)],1)],1)],1):t._e()],1)},o=[]},cc98:function(t,e,i){"use strict";i.r(e);var a=i("c576"),n=i("7954");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("3299");var d,c=i("f0c5"),s=Object(c["a"])(n["default"],a["b"],a["c"],!1,null,"f0aee4dc",null,!1,a["a"],d);e["default"]=s.exports}}]);