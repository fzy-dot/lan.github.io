(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-card-clerk-clerk"],{"17c2":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("app-layout",[i("v-uni-view",{staticClass:"box"},[i("v-uni-view",{staticClass:"item"},[t.detail.name?i("v-uni-view",{staticClass:"order-info"},[i("v-uni-view",[i("v-uni-view",{staticClass:"info-label"},[t._v("收货人："),i("v-uni-text",[t._v(t._s(t.detail.name))])],1)],1),i("v-uni-view",[i("v-uni-view",{staticClass:"info-label"},[t._v("联系方式："),i("v-uni-text",[t._v(t._s(t.detail.mobile))])],1)],1)],1):t._e(),i("v-uni-view",{staticClass:"card-info"},[i("v-uni-image",{staticClass:"card-img",attrs:{src:t.detail.pic_url}}),i("v-uni-view",{staticClass:"card-name t-omit-two"},[t._v(t._s(t.detail.card_name))]),i("v-uni-view",{staticClass:"card-other"},[i("v-uni-view",{staticClass:"other-label"},[t._v("有效时间")]),i("v-uni-view",[t._v(t._s(t.detail.start_time)+" - "+t._s(t.detail.end_time))]),i("v-uni-view",{staticClass:"other-label"},[t._v("发放时间")]),i("v-uni-view",[t._v(t._s(t.detail.created_at))]),i("v-uni-view",{staticClass:"other-label"},[t._v("使用说明")]),i("v-uni-text",[t._v(t._s(t.detail.content))])],1)],1),t.detail.number||0==t.detail.number?i("v-uni-view",{staticClass:"order-info"},[i("v-uni-view",{staticStyle:{"margin-bottom":"24rpx"}},[t._v("核销信息")]),i("v-uni-view",{staticClass:"dir-left-nowrap"},[i("v-uni-view",{staticClass:"info-label"},[t._v("剩余次数：")]),i("v-uni-view",[i("v-uni-view",[t._v(t._s(t.detail.number-t.detail.use_number)+"次")])],1)],1),i("v-uni-view",{staticClass:"dir-left-nowrap"},[i("v-uni-view",{staticClass:"info-label"},[t._v("已核销次数：")]),i("v-uni-view",[i("v-uni-view",[t._v(t._s(t.detail.use_number)+"次")])],1)],1),i("v-uni-view",{staticClass:"dir-left-nowrap"},[i("v-uni-view",{staticClass:"info-label"},[t._v("总次数：")]),i("v-uni-view",[i("v-uni-view",[t._v(t._s(t.detail.number)+"次")])],1)],1)],1):t._e()],1),0==t.detail.is_use&&0==t.detail.receive_id?i("v-uni-view",{staticClass:"bottom cross-center"},[0==t.detail.is_store_permission?i("v-uni-view",{staticClass:"no-permission"},[i("v-uni-button",{staticClass:"submit-btn"},[t._v("无该门店核销权限")])],1):i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit=!0}}},[i("v-uni-button",{staticClass:"submit-btn"},[t._v("核销卡券")])],1)],1):t._e()],1),t.msg||t.submit?i("v-uni-view",{staticClass:"bg cross-center main-center",on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e)}}},[i("v-uni-view",{staticClass:"dialog"},[i("v-uni-view",{staticClass:"title"},[t._v(t._s(t.submit?"输入本次核销次数":"提示"))]),t.msg?i("v-uni-view",{staticClass:"dialog-content"},[t._v(t._s(t.msg))]):t._e(),t.submit?i("v-uni-view",{staticClass:"dialog-content"},[i("v-uni-input",{staticClass:"input-number",attrs:{type:"number"},model:{value:t.useNumber,callback:function(e){t.useNumber=e},expression:"useNumber"}}),t._v("次")],1):t._e(),t.msg?i("v-uni-view",{staticClass:"dialog-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closeDialog.apply(void 0,arguments)}}},[t._v("确认")]):t._e(),t.submit?i("v-uni-view",{staticClass:"dialog-btn main-center cross-center"},[i("v-uni-view",{staticStyle:{color:"#666666",width:"50%"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit=!1}}},[t._v("取消")]),i("v-uni-view",{staticClass:"line"}),i("v-uni-view",{staticStyle:{width:"50%"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clerk.apply(void 0,arguments)}}},[t._v("确定")])],1):t._e()],1)],1):t._e()],1)},o=[]},"1d01":function(t,e,i){var a=i("ed7b");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("1ef6ce94",a,!0,{sourceMap:!1,shadowMode:!1})},7058:function(t,e,i){"use strict";i.r(e);var a=i("9934"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},9934:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{detail:{start_time:"",end_time:""},msg:null,is_clerk:0,submit:!1,cardId:null,surplus_number:0,useNumber:1,qrCodeId:-1}},name:"clerk",methods:{getList:function(t){var e=this;e.$showLoading({text:"加载中..."}),e.$request({url:e.$api.card.detail,data:{cardId:t,qr_code_id:e.qrCodeId}}).then((function(i){e.$hideLoading(),0===i.code?(e.detail=i.data.card,e.cardId=t):uni.showToast({title:i.msg,icon:"none",duration:1e3}),e.detail.clerk_number&&e.detail.clerk_number>=1&&uni.showModal({title:"提示",content:"核销码已失效",showCancel:!1,complete:function(t){uni.navigateBack()}})})).catch((function(){e.$hideLoading()}))},clerk:function(){var t=this;if(uni.showLoading({title:"核销中..."}),!t.useNumber)return uni.showToast({title:"请输入核销次数",icon:"none",duration:2e3}),!1;t.$request({url:t.$api.card.clerk,data:{cardId:t.cardId,use_number:t.useNumber,qr_code_id:t.qrCodeId}}).then((function(e){uni.hideLoading(),0===e.code?(t.is_clerk=e.data.is_clerk,t.msg=e.msg,t.submit=!1,t.surplus_number=e.data.surplus_number):uni.showToast({title:e.msg,icon:"none",duration:2e3})})).catch((function(){uni.hideLoading()}))},closeDialog:function(){if(this.msg){if(this.msg="",this.is_clerk){this.surplus_number>0?"/plugins/clerk/order/order?status=2&type=0":"/plugins/clerk/order/order?status=2&type=1",uni.navigateBack({})}}else this.msg=""}},onLoad:function(t){this.$commonLoad.onload(t),t.qr_code_id&&(this.qrCodeId=t.qr_code_id),this.getList(t.cardId)}};e.default=a},e78d:function(t,e,i){"use strict";i.r(e);var a=i("17c2"),n=i("7058");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("f331");var s,r=i("f0c5"),d=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"800b73ea",null,!1,a["a"],s);e["default"]=d.exports},ed7b:function(t,e,i){e=t.exports=i("24fb")(!1),e.push([t.i,'@charset "UTF-8";.text-center[data-v-800b73ea]{text-align:center}.font-weight[data-v-800b73ea]{font-weight:700}.page-width[data-v-800b73ea]{width:100%}.goods-hover-class[data-v-800b73ea]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-800b73ea]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}\n/*全局文字大小*/\n/* 屏幕宽度*/uni-page-body[data-v-800b73ea]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-800b73ea]{width:100%}.u-hover-class[data-v-800b73ea]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-800b73ea]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.box[data-v-800b73ea]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.box .item[data-v-800b73ea]{margin-bottom:%?140?%}.card-info[data-v-800b73ea]{margin:0 %?24?%;border-radius:%?15?%;background-color:#fff;position:relative;margin-top:%?70?%;text-align:center;padding:%?80?% %?24?% %?36?%;margin-bottom:%?20?%}.card-img[data-v-800b73ea]{height:%?88?%;width:%?88?%;position:absolute;left:0;right:0;margin:0 auto;top:%?-44?%;border-radius:%?44?%}.card-name[data-v-800b73ea]{font-size:%?46?%;max-width:70%;color:#353535;margin:0 auto %?38?%}.card-status[data-v-800b73ea]{width:%?160?%;height:%?60?%;position:absolute;bottom:%?30?%;left:0;right:0;margin:0 auto;line-height:%?60?%;font-size:15px;border-radius:%?30?%;background-color:#feeeee;color:#ff4544}.card-about[data-v-800b73ea]{padding:%?40?%;width:90%;margin:0 auto %?50?%;border-radius:%?15?%;background-color:#fff;font-size:15px}.about-title[data-v-800b73ea]{color:#999;margin-bottom:%?40?%}.submit-btn[data-v-800b73ea]{width:%?702?%;height:%?88?%;margin:0 auto;padding:0;text-align:center;line-height:%?88?%;border-radius:%?44?%;background-color:#ff4544;color:#fff;font-size:%?32?%}.bottom[data-v-800b73ea]{position:fixed;bottom:0;height:%?140?%;width:100%;padding:0 %?24?%;border-top:%?1?% solid #e2e2e2;background:#fff}.order-info[data-v-800b73ea]{width:%?702?%;margin:%?24?%;background-color:#fff;border-radius:%?16?%;padding:%?28?% %?24?%;font-size:%?28?%;color:#353535}.info-label[data-v-800b73ea]{color:#999}.info-label uni-text[data-v-800b73ea]{color:#353535}.card-other[data-v-800b73ea]{text-align:left;font-size:%?28?%;color:#353535;border-top:%?1?% solid #e2e2e2}.other-label[data-v-800b73ea]{color:#999;margin:%?30?% 0 %?22?%}.bg[data-v-800b73ea]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.3);z-index:1000}.dialog[data-v-800b73ea]{width:%?630?%;background-color:#fff;padding-top:%?40?%;border-radius:%?16?%;font-size:%?32?%;color:#353535;text-align:center}.dialog .title[data-v-800b73ea]{font-size:%?32?%;color:#353535;margin-bottom:%?40?%}.dialog-content[data-v-800b73ea]{margin:%?40?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.dialog-content .input-number[data-v-800b73ea]{width:%?288?%;background:#f7f7f7;border-radius:%?16?%;height:%?80?%;margin-right:%?16?%;line-height:%?80?%}.dialog-btn[data-v-800b73ea]{color:#ff4544;height:%?88?%;line-height:%?88?%;border-top:%?1?% solid #e2e2e2}.line[data-v-800b73ea]{height:%?45?%;width:%?1?%;background-color:#e2e2e2}.no-permission uni-button[data-v-800b73ea]{background-color:#b2b2b2}body.?%PAGE?%[data-v-800b73ea]{background:#f7f7f7}',""])},f331:function(t,e,i){"use strict";var a=i("1d01"),n=i.n(a);n.a}}]);