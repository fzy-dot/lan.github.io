(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-app_admin-send-send"],{"15ba":function(e,t,i){"use strict";var a;i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return a}));var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-layout",[a("v-uni-view",{staticClass:"title main-between"},[a("v-uni-view",[e._v("选择发货商品"),a("v-uni-text",[e._v("默认全选")])],1)],1),e.detail.detail&&e.detail.detail.length>0?a("v-uni-view",{staticClass:"goods-list"},e._l(e.detail.detail,(function(t){return a("v-uni-view",{key:t.id,staticClass:"dir-left-nowrap cross-center goods-item"},[2==t.choose&&0==e.order_refund_id?a("v-uni-image",{staticClass:"active-icon",staticStyle:{"background-color":"#E2E2E2"},attrs:{src:"/static/image/icon/form-er.png"}}):t.choose?a("v-uni-image",{staticClass:"active-icon",attrs:{src:i("aac0")},on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.chooseAddress(t)}}}):a("v-uni-image",{staticClass:"active-icon",attrs:{src:"/static/image/icon/form-er.png"},on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.chooseAddress(t)}}}),a("v-uni-view",{staticClass:"dir-left-nowrap goods"},[a("v-uni-image",{staticClass:"goods-img",attrs:{src:t.goods_info.goods_attr.pic_url?t.goods_info.goods_attr.pic_url:t.goods_info.goods_attr.cover_pic}}),a("v-uni-view",{staticClass:"goods-info"},[a("v-uni-view",{staticClass:"t-omit-two goods-name"},[e._v(e._s(t.goods_info.goods_attr.name))]),a("v-uni-view",{staticClass:"goods-attr t-omit"},[t.goods_info.goods_attr.attr_str?a("v-uni-text",[e._v(e._s(t.goods_info.goods_attr.attr_str))]):e._l(t.goods_info.attr_list,(function(t,i){return a("v-uni-text",{key:i},[e._v(e._s(t.attr_group_name)+":"+e._s(t.attr_name))])}))],2),a("v-uni-view",{staticClass:"main-between cross-bottom"},[a("v-uni-view",{staticClass:"goods-num"},[e._v("x"+e._s(t.num))]),a("v-uni-view",[e._v("￥"+e._s(t.total_price))])],1)],1)],1)],1)})),1):e._e(),a("v-uni-view",{staticClass:"title"},[e._v("填写物流信息")]),a("v-uni-view",{staticClass:"input-list"},[2==e.detail.send_type?["weekly_buy"==e.detail.sign&&e.detail.plugin_data&&e.detail.plugin_data.extra&&e.detail.plugin_data.extra.weekly_buy&&e.detail.plugin_data.extra.weekly_buy.now_express?a("v-uni-view",{staticClass:"main-between input-item"},[a("v-uni-view",{staticClass:"label"},[e._v("选择发货期数")]),a("v-uni-view",{staticStyle:{"text-align":"right"}},[e._v("第"+e._s(e.detail.plugin_data.extra.weekly_buy.now_express.week_number)+"期")])],1):e._e(),a("v-uni-view",{staticClass:"main-between input-item"},[a("v-uni-view",{staticClass:"label"},[e._v("选择配送方式")]),a("v-uni-view",{staticClass:"type dir-left-nowrap city-type"},[a("v-uni-view",{class:2==e.is_express?"active":"",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toggleExpress(2)}}},[e._v("商家自己配送")]),a("v-uni-view",{class:1==e.is_express?"active":"",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toggleExpress(1)}}},[e._v("第三方配送")])],1)],1),2==e.is_express?a("v-uni-view",{staticClass:"dir-left-nowrap input-item"},[a("v-uni-view",{staticClass:"label"},[e._v("配送员")]),a("v-uni-view",{staticClass:"dir-right-nowrap cross-center",attrs:{width:"width:30%;"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toPick.apply(void 0,arguments)}}},[a("v-uni-image",{staticClass:"to-more",attrs:{src:"/static/image/icon/arrow-right.png"}}),a("v-uni-text",[e._v(e._s(e.city.delivery))])],1)],1):[a("v-uni-view",{staticClass:"dir-left-nowrap input-item"},[a("v-uni-view",{staticClass:"label"},[e._v("选择配送")]),a("v-uni-view",{staticClass:"dir-right-nowrap cross-center",attrs:{width:"width:30%;"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toPick.apply(void 0,arguments)}}},[a("v-uni-image",{staticClass:"to-more",attrs:{src:"/static/image/icon/arrow-right.png"}}),a("v-uni-text",{staticClass:"t-omit"},[e._v(e._s(e.city.cityService))])],1)],1),e.city.isPreview?[a("v-uni-view",{staticClass:"dir-left-nowrap input-item",staticStyle:{padding:"12rpx 0","border-top":"0",height:"60rpx"}},[a("v-uni-view",{staticClass:"preview-fee"},[e._v(e._s(e.city.name)+"可接单")])],1),a("v-uni-view",{staticClass:"dir-left-nowrap input-item",staticStyle:{padding:"0","border-top":"0",height:"60rpx","margin-bottom":"24rpx"}},[a("v-uni-view",[e._v("预订单费用")]),a("v-uni-view",{staticClass:"dir-right-nowrap cross-center"},[e._v("￥"+e._s(e.city.fee))])],1)]:e._e()]]:e.is_express>-2?["weekly_buy"==e.detail.sign&&e.detail.plugin_data&&e.detail.plugin_data.extra&&e.detail.plugin_data.extra.weekly_buy&&e.detail.plugin_data.extra.weekly_buy.now_express?a("v-uni-view",{staticClass:"main-between input-item"},[a("v-uni-view",{staticClass:"label"},[e._v("选择发货期数")]),a("v-uni-view",{staticStyle:{"text-align":"right"}},[e._v("第"+e._s(e.detail.plugin_data.extra.weekly_buy.now_express.week_number)+"期")])],1):e._e(),a("v-uni-view",{staticClass:"main-between input-item"},[a("v-uni-view",{staticClass:"label"},[e._v("选择发货方式")]),a("v-uni-view",{staticClass:"type dir-left-nowrap"},[a("v-uni-view",{class:1==e.is_express?"active":"",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toggleExpress(1)}}},[e._v("快递配送")]),a("v-uni-view",{class:0==e.is_express?"active":"",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toggleExpress(0)}}},[e._v("无需物流")])],1)],1),1==e.is_express?a("v-uni-view",{staticClass:"dir-left-nowrap input-item"},[a("v-uni-view",{staticClass:"label"},[e._v("快递公司")]),a("v-uni-view",{staticClass:"dir-right-nowrap cross-center",attrs:{width:"width:30%;"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toPick(1)}}},[a("v-uni-image",{staticClass:"to-more",attrs:{src:"/static/image/icon/arrow-right.png"}}),a("v-uni-text",[e._v(e._s(e.express))])],1)],1):e._e(),1==e.is_express?a("v-uni-view",{staticClass:"dir-left-nowrap input-item",staticStyle:{position:"relative"}},[a("v-uni-view",{staticClass:"label"},[e._v("快递单号")]),a("v-uni-input",{staticClass:"express-no",model:{value:e.express_no,callback:function(t){e.express_no=t},expression:"express_no"}}),a("app-scan",{staticClass:"scan-btn",on:{get:function(t){arguments[0]=t=e.$handleEvent(t),e.getNumber.apply(void 0,arguments)}}}),e.id>0?a("v-uni-text",{staticClass:"get",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getExpressNo.apply(void 0,arguments)}}},[e._v("获取面单")]):e._e()],1):e._e(),1==e.is_express?a("v-uni-view",{staticClass:"dir-left-nowrap input-item"},[a("v-uni-view",{staticClass:"label"},[e._v("收件人邮编")]),a("v-uni-input",{attrs:{type:"number"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1):e._e(),1==e.is_express?a("v-uni-view",{staticClass:"dir-left-nowrap input-item"},[a("v-uni-view",{staticClass:"label"},[e._v("商家留言")]),a("v-uni-input",{model:{value:e.words,callback:function(t){e.words=t},expression:"words"}})],1):e._e(),0==e.is_express?a("v-uni-view",{staticClass:"dir-left-nowrap input-item"},[a("v-uni-view",{staticClass:"label"},[e._v("物流内容")]),a("v-uni-input",{attrs:{placeholder:"请输入物流内容"},model:{value:e.express_content,callback:function(t){e.express_content=t},expression:"express_content"}})],1):e._e()]:e._e()],2),2==e.detail.send_type?[1==e.is_express?a("v-uni-button",{staticClass:"address-bottom",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.citySend()}}},[e._v(e._s(0==e.city.isPreview?"下单":"确认发货"))]):a("v-uni-button",{staticClass:"address-bottom",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.citySend()}}},[e._v("确认发货")])]:[a("v-uni-button",{staticClass:"address-bottom",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.saveAddress.apply(void 0,arguments)}}},[e._v("确认发货")])],e.dialog?a("v-uni-view",{staticClass:"dialog"},[a("v-uni-view",{class:["picker-list",e.iphone_x?"iphone_x":""]},[a("v-uni-view",{staticClass:"main-between picker-header"},[a("v-uni-view",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.closeDialog(2)}}},[e._v("取消")]),a("v-uni-view",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.closeDialog(1)}}},[e._v("确定")])],1),a("v-uni-picker-view",{staticClass:"pick",attrs:{value:e.chooseIndex,"indicator-style":"height: 34px;"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.bindChange.apply(void 0,arguments)}}},[a("v-uni-picker-view-column",e._l(e.list,(function(t,i){return a("v-uni-view",{key:i,staticClass:"picker-view t-omit",style:{color:e.newIndex==i?"#446dfd":e.newIndex==i+1||e.newIndex==i-1?"#999999":e.newIndex==i+2||e.newIndex==i-2?"#cdcdcd":""}},[e._v(e._s(t.name))])})),1)],1)],1)],1):e._e()],2)},n=[]},"1b3d":function(e,t,i){"use strict";i.r(t);var a=i("15ba"),s=i("976a");for(var n in s)["default"].indexOf(n)<0&&function(e){i.d(t,e,(function(){return s[e]}))}(n);i("f72e");var o,r=i("f0c5"),d=Object(r["a"])(s["default"],a["b"],a["c"],!1,null,"11016ac1",null,!1,a["a"],o);t["default"]=d.exports},"24cc":function(e,t,i){var a=i("e6df");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var s=i("4f06").default;s("24eb3bfa",a,!0,{sourceMap:!1,shadowMode:!1})},"2a9d":function(e,t,i){t=e.exports=i("24fb")(!1),t.push([e.i,'@charset "UTF-8";.text-center[data-v-11016ac1]{text-align:center}.font-weight[data-v-11016ac1]{font-weight:700}.page-width[data-v-11016ac1]{width:100%}.goods-hover-class[data-v-11016ac1]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-11016ac1]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}\n/*全局文字大小*/\n/* 屏幕宽度*/uni-page-body[data-v-11016ac1]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-11016ac1]{width:100%}.u-hover-class[data-v-11016ac1]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-11016ac1]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.title[data-v-11016ac1]{padding:%?28?% %?24?% %?24?%;font-size:%?28?%;color:#353535}.title uni-text[data-v-11016ac1]{margin-left:%?16?%;color:#999}.goods-list[data-v-11016ac1]{background-color:#fff;margin:0 %?24?% %?28?%;padding:%?32?% %?24?%;border-radius:%?16?%}.goods-list .goods-item[data-v-11016ac1]{margin-top:%?24?%}.goods-list .goods-item[data-v-11016ac1]:first-of-type{margin-top:0}.goods-list .active-icon[data-v-11016ac1]{height:%?36?%;width:%?36?%;border-radius:%?18?%;margin-right:%?24?%}.goods-list .goods[data-v-11016ac1]{width:%?600?%}.goods-list .goods-img[data-v-11016ac1]{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;width:%?160?%;height:%?160?%;margin-right:%?20?%}.goods-list .goods-info[data-v-11016ac1]{font-size:%?24?%;width:%?414?%;color:#353535}.goods-list .goods-info .goods-name[data-v-11016ac1]{height:%?64?%;margin-top:%?5?%;width:%?414?%}.goods-list .goods-info .goods-attr[data-v-11016ac1]{color:#999;width:95%;margin-top:%?18?%;margin-bottom:%?12?%}.goods-list .goods-info .goods-attr uni-text[data-v-11016ac1]{margin-right:%?5?%}.goods-list .goods-info .goods-num[data-v-11016ac1]{color:#999}.express-no[data-v-11016ac1]{padding-right:%?220?%}.address-bottom[data-v-11016ac1]{width:%?702?%;height:%?80?%;line-height:%?80?%;border-radius:%?40?%;padding:0;text-align:center;margin:%?40?% auto;color:#fff;z-index:7;font-size:%?28?%;background-color:#446dfd}.to-more[data-v-11016ac1]{height:%?24?%;width:%?12?%;margin-left:%?10?%}.input-list[data-v-11016ac1]{background-color:#fff;margin:0 %?24?%;border-radius:%?16?%;padding:0 %?24?%}.input-list .input-item[data-v-11016ac1]{border-top:%?1?% solid #eee;padding:%?24?% 0;height:%?96?%;font-size:%?28?%;color:#495060}.input-list .input-item uni-view[data-v-11016ac1]{width:%?550?%;height:%?48?%;line-height:%?48?%;font-size:%?28?%}.input-list .input-item .scan-btn[data-v-11016ac1]{position:absolute;height:%?96?%;width:%?49?%;right:%?170?%;top:0}.input-list .input-item .type[data-v-11016ac1]{width:%?328?%}.input-list .input-item .type uni-view[data-v-11016ac1]{padding:0 %?20?%;height:%?48?%;line-height:%?48?%;margin-left:%?16?%;background-color:#fff;border-radius:%?26?%;border:%?2?% solid #e2e2e2;color:#666;display:inline-block;width:auto;font-size:%?26?%}.input-list .input-item .type .active[data-v-11016ac1]{background-color:#446dfd;border:0;color:#fff}.input-list .input-item .city-type[data-v-11016ac1]{width:%?410?%}.input-list .input-item .label[data-v-11016ac1]{width:%?200?%;height:%?48?%;line-height:%?48?%}.input-list .input-item uni-input[data-v-11016ac1]{width:%?550?%;height:%?48?%;line-height:%?48?%;font-size:%?28?%}.input-list .input-item .preview-fee[data-v-11016ac1]{color:#63be72}.input-list .input-item[data-v-11016ac1]:first-of-type{border-top:0}.dialog[data-v-11016ac1]{position:fixed;height:100%;width:100%;bottom:0;left:0;z-index:10;background-color:rgba(0,0,0,.3)}.picker-list[data-v-11016ac1]{background-color:#fff;padding-top:%?20?%;position:fixed;bottom:0;left:0;width:100%}.picker-list .pick[data-v-11016ac1]{width:100%;height:%?440?%}.picker-list .picker-view[data-v-11016ac1]{line-height:34px;height:34px;font-size:%?32?%;text-align:center}.picker-list.iphone_x[data-v-11016ac1]{bottom:%?96?%}.picker-header[data-v-11016ac1]{padding:0 %?24?%;color:#446dfd;font-size:%?32?%}.get[data-v-11016ac1]{width:%?160?%;height:%?48?%;line-height:%?48?%;text-align:center;border:%?1?% solid #446dfd;border-radius:%?24?%;position:absolute;top:%?20?%;right:0;display:block;color:#446dfd}body.?%PAGE?%[data-v-11016ac1]{background:#f7f7f7}',""])},"3d14":function(e,t,i){var a=i("2a9d");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var s=i("4f06").default;s("2af1da98",a,!0,{sourceMap:!1,shadowMode:!1})},"4f38":function(e,t,i){"use strict";i.r(t);var a=i("d323"),s=i("ee9a");for(var n in s)["default"].indexOf(n)<0&&function(e){i.d(t,e,(function(){return s[e]}))}(n);i("b05e");var o,r=i("f0c5"),d=Object(r["a"])(s["default"],a["b"],a["c"],!1,null,"6ecce5aa",null,!1,a["a"],o);t["default"]=d.exports},"8c2e":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("a481"),i("28a5");var a={name:"app-scan",props:{},methods:{scanCode:function(){var e=this;uni.scanCode({success:function(t){console.log(t),t.result&&e.$emit("get",t.result)},fail:function(t){t.result&&e.$emit("get",t.result)}}),e.$jwx.isWechat()&&e.$jwx.scanQRCode({success:function(t){if(t.resultStr){if(t.resultStr.indexOf(",")>0){var i=t.resultStr.split(",")[1];i=i.replace(/[^a-z\d]/gi,""),e.$emit("get",i)}}else t.result&&e.$emit("get",t.result)}})}}};t.default=a},"976a":function(e,t,i){"use strict";i.r(t);var a=i("9b0d"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(n);t["default"]=s.a},"9b0d":function(e,t,i){"use strict";var a=i("4ea4");i("ac4d"),i("8a81"),i("5df3"),i("1c4c"),i("6b54"),i("87b3"),i("8e6e"),i("456d"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("ac6a"),i("7f7f");var s=a(i("ade3")),n=i("2f62"),o=a(i("4f38"));function r(e,t){var i="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=d(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var a=0,s=function(){};return{s:s,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,r=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){r=!0,n=e},f:function(){try{o||null==i.return||i.return()}finally{if(r)throw n}}}}function d(e,t){if(e){if("string"===typeof e)return c(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach((function(t){(0,s.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var p={data:function(){return{express_no:"",express:"",customer_name:"",express_content:"",code:"",words:"",list:[],detail:{},dialog:!1,iphone_x:!1,id:"",chooseIndex:[0],express_id:0,newIndex:0,is_express:-2,is_send:0,order_refund_id:0,express_single:{},city:{cityList:[],deliveryId:null,delivery:"",cityServiceList:[],cityServiceId:null,cityService:"",isPreview:0,fee:0,name:"",delivery_no:""}}},components:{appScan:o.default},computed:u({},(0,n.mapState)({userInfo:function(e){return e.user.info},adminImg:function(e){return e.mallConfig.__wxapp_img.app_admin}})),methods:{getNumber:function(e){this.express_no=e},chooseAddress:function(e){if(this.is_send){var t,i=r(this.detail.detailExpress);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.id==e.expressRelation.order_detail_express_id){this.express=a.express,this.is_express=2==a.send_type?0:1,this.express_content=a.express_content,this.express_no=a.express_no,this.express_id=a.id,this.customer_name=a.customer_name,this.code="",this.words=a.merchant_remark,this.code=a.code>0?a.code:"";var s,n=r(this.detail.detail);try{for(n.s();!(s=n.n()).done;){var o=s.value;o.choose=!1;var d,c=r(a.expressRelation);try{for(c.s();!(d=c.n()).done;){var l=d.value;l.order_detail_id==o.id&&(o.choose=!0)}}catch(u){c.e(u)}finally{c.f()}}}catch(u){n.e(u)}finally{n.f()}}}}catch(u){i.e(u)}finally{i.f()}}else e.choose=!e.choose;this.$forceUpdate()},toggleExpress:function(e){if(this.is_express=e,2==this.detail.send_type)for(var t in this.list=2==e?this.city.cityList:this.city.cityServiceList,this.list)2==this.is_express?this.list[t].id==this.city.deliveryId&&(this.chooseIndex[0]=+t,this.newIndex=+t):this.list[t].id==this.city.cityServiceId&&(this.chooseIndex[0]=+t,this.newIndex=+t)},bindChange:function(e){this.newIndex=e.detail.value[0]},toPick:function(e){var t=this;1==e?(t.customer_name="",t.newIndex=t.chooseIndex[0]):t.newIndex=t.chooseIndex[0],setTimeout((function(){t.dialog=!t.dialog}))},closeDialog:function(e){1==e?(this.chooseIndex[0]=this.newIndex,2==this.detail.send_type?2==this.is_express?(this.city.delivery="("+this.list[this.chooseIndex[0]].id+")"+this.list[this.chooseIndex[0]].name,this.city.deliveryId=this.list[this.chooseIndex[0]].id):(this.city.cityService="("+this.list[this.chooseIndex[0]].id+")"+this.list[this.chooseIndex[0]].name,this.city.cityServiceId=this.list[this.chooseIndex[0]].id,this.city.isPreview=0):this.express=this.list[this.newIndex].name):this.newIndex=this.chooseIndex[0],this.dialog=!this.dialog},getExpressNo:function(){var e=this;uni.showLoading({mask:!0,title:"加载中..."}),e.$request({url:e.$api.app_admin.print,data:{express:e.express,code:e.code,order_id:e.id,order_detail_ids:JSON.stringify(e.getIdList())}}).then((function(t){uni.hideLoading(),0==t.code?(e.express_no=t.data.Order.LogisticCode,e.express_single=t.data.express_single):uni.showToast({title:t.msg,icon:"none",duration:1e3})})).catch((function(e){uni.hideLoading()}))},getExpress:function(){var e=this;uni.showLoading({mask:!0,title:"加载中..."}),e.$request({url:e.$api.app_admin.express}).then((function(t){uni.hideLoading(),0==t.code?(e.list=t.data.list,e.getList()):uni.showToast({title:t.msg,icon:"none",duration:1e3})})).catch((function(e){uni.hideLoading()}))},getList:function(){var e=this,t=this;uni.showLoading({mask:!0,title:"加载中..."}),t.$request({url:t.$api.app_admin.detail,data:{order_id:t.id},method:"post"}).then((function(i){if(uni.hideLoading(),0==i.code){for(var a in t.detail=i.data.order,2==e.detail.send_type?(t.getDelivery(),t.express_id=i.data.order.detailExpress.length>0?i.data.order.detailExpress[0].id:0,t.is_express=i.data.order.detailExpress.length>0?i.data.order.detailExpress[0].send_type:2):t.is_express=1,t.detail.detail)t.detail.detail[a].choose=!0;var s=t.is_send?1:0;for(var n in t.detail.detailExpress.length>s&&"weekly_buy"!=t.detail.sign&&t.detail.detail.forEach((function(e){for(var i=s;i<t.detail.detailExpress.length;i++)for(var a in t.detail.detailExpress[i].expressRelation)t.detail.detailExpress[i].expressRelation[a].order_detail_id==e.id&&(e.choose=!t.is_send&&2)})),t.is_send>0&&2!=e.detail.send_type?(t.express=i.data.order.detailExpress[0].express,t.is_express=2==i.data.order.detailExpress[0].send_type?0:1,t.express_content=i.data.order.detailExpress[0].express_content,t.express_no=i.data.order.detailExpress[0].express_no,t.express_id=i.data.order.detailExpress[0].id,t.customer_name=i.data.order.detailExpress[0].customer_name,t.code="",t.words=i.data.order.detailExpress[0].merchant_remark,i.data.order.code>0&&(t.code=i.data.order.detailExpress[0].code)):t.express=i.data.order.last_express?i.data.order.last_express:t.list[0].name,t.list)t.list[n].name==t.express&&(t.chooseIndex[0]=n)}else uni.showToast({title:i.msg,icon:"none",duration:1e3})})).catch((function(e){uni.hideLoading()}))},saveAddress:function(e){var t=this;if(1!=t.is_express||t.express_no){var i=t.getIdList();if(0!=i.length||0!=t.order_refund_id){uni.showLoading({mask:!0,title:"提交中..."});var a={is_express:1,order_id:t.id,express_no:t.express_no,express:t.express,code:t.code,customer_name:t.customer_name,merchant_remark:t.words,express_content:"",order_detail_id:JSON.stringify(i),express_single_id:t.express_single.id?t.express_single.id:0};0==t.is_express&&(a={is_express:2,order_id:t.id,express_content:t.express_content,order_detail_id:JSON.stringify(i)}),t.is_send>0&&(a.express_id=t.express_id),"weekly_buy"==t.detail.sign&&t.detail.plugin_data.extra.weekly_buy.now_express&&(a.week_number=t.detail.plugin_data.extra.weekly_buy.now_express.week_number),t.order_refund_id>0?t.$request({url:t.$api.app_admin.refund_handle,method:"POST",data:{is_express:1,type:2,is_agree:1,order_refund_id:t.order_refund_id,express_no:t.express_no,express:t.express,merchant_remark:t.words}}).then((function(e){if(uni.hideLoading(),0==e.code){var t=e.msg;uni.showToast({title:t,duration:1e3,icon:"success",mask:!1}),setTimeout((function(){uni.navigateBack()}),500)}else uni.showToast({title:e.msg,icon:"none",duration:1e3})})).catch((function(e){uni.hideLoading(),uni.showToast({title:e,icon:"none",duration:1e3})})):t.$request({url:t.$api.app_admin.send,method:"POST",data:a}).then((function(e){if(uni.hideLoading(),0==e.code){var i=e.msg;2==t.is_send&&(i="修改成功"),uni.showToast({title:i,duration:1e3,icon:"success",mask:!1}),setTimeout((function(){uni.navigateBack()}),500)}else uni.showToast({title:e.msg,icon:"none",duration:1e3})})).catch((function(e){uni.hideLoading(),uni.showToast({title:e,icon:"none",duration:1e3})}))}else uni.showToast({title:"请选择发货商品",icon:"none",duration:1e3})}else uni.showToast({title:"快递单号不得为空",icon:"none",duration:1e3})},getIdList:function(){var e=this,t=[];for(var i in e.detail.detail)e.detail.detail[i].choose&&2!=e.detail.detail[i].choose&&t.push(e.detail.detail[i].id);return t},getDelivery:function(){var e=this,t=this;t.$request({url:t.$api.app_admin.delivery}).then((function(i){if(0===i.code){i.data.list.length>0&&(e.city.cityList=i.data.list,e.city.deliveryId=i.data.list[0].id,e.city.delivery="("+i.data.list[0].id+")"+i.data.list[0].name);var a=i.data.city_service_list;if(a.length>0){var s=[];a.forEach((function(e,i){("第三方"==e.service_type||"wxapp"==t.detail.platform&&"微信"==e.service_type)&&s.push(e)})),e.city.cityServiceList=s,e.city.cityServiceId=s[0].id,e.city.cityService="("+s[0].id+")"+s[0].name}e.list=1==e.is_express?e.city.cityServiceList:e.city.cityList}else uni.showToast({title:i.msg,icon:"none",duration:1e3})})).catch((function(e){uni.hideLoading()}))},citySend:function(){var e,t=this;if(2==t.detail.send_type){uni.showLoading({mask:!0,title:"加载中..."});var i=t.getIdList();if(0==i.length&&0==t.order_refund_id)return void uni.showToast({title:"请选择发货商品",icon:"none",duration:1e3});e={is_express:t.is_express,words:"",order_id:t.detail.id,order_detail_id:JSON.stringify(i),city_service:t.city.cityService,is_preview:t.city.isPreview?0:1,delivery_no:t.city.delivery_no},2==t.detail.send_type&&(e.man=t.city.delivery),t.is_send>0&&(e.express_id=t.express_id),"weekly_buy"==t.detail.sign&&t.detail.plugin_data.extra.weekly_buy.now_express&&(e.week_number=t.detail.plugin_data.extra.weekly_buy.now_express.week_number),t.$request({url:t.$api.app_admin.send,data:e,method:"post"}).then((function(e){if(uni.hideLoading(),0===e.code){var i=e.data;i&&1==i.preview_success?(t.city.fee=i.fee,t.city.isPreview=1,t.city.name=i.name,t.city.isPreview=1,t.city.delivery_no=i.delivery_no):setTimeout((function(){uni.navigateBack()}),500),uni.showToast({title:e.msg,type:"success",mask:!1,duration:2e3})}else uni.showToast({title:e.msg,icon:"none",duration:1e3})})).catch((function(e){uni.hideLoading(),uni.showToast({title:e,icon:"none",duration:1e3})}))}}},onLoad:function(e){this.$commonLoad.onload(e);var t=this;t.iphone_x=this.$utils.checkIphone(),e.id>0&&(t.id=e.id),e.order_refund_id>0&&(t.order_refund_id=e.order_refund_id),0==e.send_type?t.getExpress():(uni.showLoading({mask:!0,title:"加载中..."}),t.getList()),e.is_send>0&&(t.is_send=e.is_send)}};t.default=p},aac0:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjczNzZDRUI5OTE5NDExRTk5RDI5QzM0NkFCMUVCMjU1IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjczNzZDRUJBOTE5NDExRTk5RDI5QzM0NkFCMUVCMjU1Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NzM3NkNFQjc5MTk0MTFFOTlEMjlDMzQ2QUIxRUIyNTUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NzM3NkNFQjg5MTk0MTFFOTlEMjlDMzQ2QUIxRUIyNTUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4OF44zAAADCElEQVR42sSYW4hNURjH99lnm2mYMGXkwaW8SeKFeRBGGbehyG0a4zKaZIpxfRo0uZQXyjVKBhHGuMRojGhcC0mRxDyYQZHIw4xcD8P/y/9oOc3Ze+199jrnq19nr1pnn//59vr+61s7MmHFL8tnDAIFYAwYCgaAnuA3aAevwFNwCzwEr91udnW3/d844kNQMZgGZoM+mt95D86Cy6BBR5CtcdOR4BJZ5kOMRF9QCS5S1GivL3gJ2gCuMDupxmTQCHYGERQFx8AWkGeFF7LWVjJjebqCuoFDoMwyF9PBSZCrI6gWLLLMxyRQV1TVGXUTtNZwZhJjKtiXrOyHgQcg20p/TEH5N6kZks/qDImR2IRHl6MKGgvmWZmLUWCmKkg8ImLwB3eApR5zZiFLWQ4u8sF8g2KOgHW8/k5LcbqYJxkaYnNr6G9QzBJl/A4k2zzlCRWLoHGGxJwA5ewCJOZwP3QrnEIRNMKAmHqwWBmL0Z7iLuAW/eRZDgxZzHlQAjo5LuO60ekscmVSb42JsuvXaMw7DeYqYkq5SUc1/0yOo5HGVWAXrz+D7S5iSpVFuwAc9Zld2+aPuMXPBD+p7mLOBT6auBjpKg8E8LYfNkvRLfaCjcp4G1ivjK+xgmLKhimLunuA9fclOrigRpr14R4Tx4Ne7B4lboOP4Js4rPyzuNuyh7YDFkSrzZvrxGo+MjVzJXRfiYX0HieFCn0kgm4q/9Ar1rCtjUdMOZEcBlkpWkaDCGplheiGWMCehONRfQqPKR4tkhyHldHos1NcTq+5Bw6Kf4RgqLVo0jpsxV3v+rxBFddMjxDEfKB1/EuzVMvmDDZoW5GdlsQmvymAs4YRUuX7k506Krku0hXyYqIc2YklE/SV5nY/DWLeyIERYl54HRTfUtQNg2Ke0S6e6J7tRf0McMaAmGbud4/9vv1o56Yp28PzEIS0gQowEbxMNkln36kDd/iCQM5uhQGq6Bx9ps1rsuNjAUp/c5yHuiLr72u9fL5iyWYzL37WQaMTo73O4/knXfV/BBgAosynNTDfLLIAAAAASUVORK5CYII="},b05e:function(e,t,i){"use strict";var a=i("24cc"),s=i.n(a);s.a},d323:function(e,t,i){"use strict";var a;i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return a}));var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"app-scan main-center cross-center",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.scanCode.apply(void 0,arguments)}}},[i("v-uni-image",{attrs:{src:"/static/image/icon/scan.png"}})],1)},n=[]},e6df:function(e,t,i){t=e.exports=i("24fb")(!1),t.push([e.i,'@charset "UTF-8";.text-center[data-v-6ecce5aa]{text-align:center}.font-weight[data-v-6ecce5aa]{font-weight:700}.page-width[data-v-6ecce5aa]{width:100%}.goods-hover-class[data-v-6ecce5aa]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-6ecce5aa]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}\n/*全局文字大小*/\n/* 屏幕宽度*/uni-page-body[data-v-6ecce5aa]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-6ecce5aa]{width:100%}.u-hover-class[data-v-6ecce5aa]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-6ecce5aa]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.app-scan[data-v-6ecce5aa]{height:100%;width:%?49?%}.app-scan uni-image[data-v-6ecce5aa]{width:%?29?%;height:%?29?%}body.?%PAGE?%[data-v-6ecce5aa]{background:#f7f7f7}',""])},ee9a:function(e,t,i){"use strict";i.r(t);var a=i("8c2e"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(n);t["default"]=s.a},f72e:function(e,t,i){"use strict";var a=i("3d14"),s=i.n(a);s.a}}]);