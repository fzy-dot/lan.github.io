(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["plugins-polite-poster"],{1890:function(t,e,a){"use strict";var o=a("4ea4");a("8e6e"),a("ac6a"),a("456d"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("aef6");var i=o(a("ade3")),r=a("2f62");function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function s(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach((function(e){(0,i.default)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var c={name:"poster",data:function(){return{qrcode_url:"",hideHeight:0,config:{}}},computed:s(s({},(0,r.mapState)({userInfo:function(t){return t.user.info},appImg:function(t){return t.mallConfig.__wxapp_img.polite}})),{},{tempStyle:function(){var t=this.calcConfig,e=t.poster_top.endsWith("vh")?t.poster_top:t.poster_top+"rpx";return{margin:"calc(".concat(e," + ").concat((t.avatar_size+6)/2,"rpx) ").concat(t.poster_left_right,"rpx 0"),paddingTop:t.has_avatar?"".concat((t.avatar_size+6)/2,"rpx"):"24rpx"}},calcConfig:function(){if(!this.config.theme_style)return{};var t={bg:"/plugins/polite/image/2.png",has_nickname:1,has_avatar:1,avatar_size:130,nickname_color:"#666666",share_title:"这里是用户自定义的分享标题",title_color:"#333333",reward_image:"/plugins/polite/image/3.png",code_size:176,poster_top:"100",poster_left_right:40,btn_bg:"#ff4544",btn_color:"#ffffff",btn_top:30,theme_style:1,code_sub_title:"助力好友得好礼，更多大奖一起拿！"},e=this.config,a=e.share_title,o=e.reward_image,i=e.code_sub_title,r={share_title:a,reward_image:o,code_sub_title:i};switch(+this.config.theme_style){case 1:Object.assign(t,{btn_bg:"#ff4544",bg:this.appImg.p_1,poster_top:"20vh"},r);break;case 2:Object.assign(t,{btn_bg:"#FFC03F",bg:this.appImg.p_2,poster_top:"20vh"},r);break;case 3:Object.assign(t,{btn_bg:"#00B0FF",bg:this.appImg.p_3,poster_top:"14vh"},r);break;case 4:Object.assign(t,this.config);break}return t},bgStyle:function(){var t=this.calcConfig.bg;return{backgroundImage:"url(".concat(t,")")}}}),onLoad:function(){this.getConfig()},methods:{getConfig:function(){var t=this;this.$showLoading({text:"加载中"}),this.$request({url:this.$api.polite.setting,method:"get"}).then((function(e){t.$hideLoading();var a=e.code,o=e.data,i=e.msg;0===a?(o.qrcode_style.poster_top=String(o.qrcode_style.poster_top),t.config=o.qrcode_style,t.qrcode_url=o.qrcode_url):uni.showToast({title:i,icon:"none"})})).catch((function(){t.$hideLoading()}))},saveImg:function(){var t=this;this.$showLoading({text:"生成中"}),this.$request({url:this.$api.polite.poster}).then((function(e){t.$hideLoading();var a=e.code,o=e.data,i=e.msg;0===a?t.$utils.batchSave(o.pic_url).then((function(){uni.showToast({title:"保存成功"})})):uni.showToast({title:i,icon:"none"})})).catch((function(){t.$hideLoading()}))}}};e.default=c},"1b4b":function(t,e,a){"use strict";var o=a("499d"),i=a.n(o);i.a},"499d":function(t,e,a){var o=a("b0e4");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var i=a("4f06").default;i("49f00ef7",o,!0,{sourceMap:!1,shadowMode:!1})},"71f0":function(t,e,a){"use strict";var o;a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return o}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("app-layout",[a("v-uni-view",{staticClass:"poster bg",style:[t.bgStyle]},[t.calcConfig.has_avatar?a("v-uni-view",{staticClass:"absolute-avatar",style:{top:t.calcConfig.poster_top.endsWith("vh")?t.calcConfig.poster_top:t.calcConfig.poster_top+"rpx"}},[a("v-uni-image",{staticClass:"avatar",style:{height:t.calcConfig.avatar_size+6+"rpx",width:t.calcConfig.avatar_size+6+"rpx"},attrs:{src:t.userInfo.avatar}})],1):t._e(),t.calcConfig.theme_style?a("v-uni-view",{staticClass:"poster-box dir-top-nowrap cross-center",style:[t.tempStyle]},[t.calcConfig.has_nickname?a("v-uni-view",{staticClass:"t-omit",staticStyle:{"font-size":"36rpx",color:"#606266","margin-top":"16rpx","margin-bottom":"6rpx"},style:{color:t.calcConfig.nickname_color}},[t._v("来自 "+t._s(t.userInfo.nickname)+" 的邀请")]):t._e(),a("v-uni-view",{staticClass:"t-omit",staticStyle:{"font-size":"44rpx",color:"#333333","margin-top":"16rpx","margin-bottom":"6rpx","font-weight":"bold"},style:{color:t.calcConfig.title_color}},[t._v(t._s(t.calcConfig.share_title))]),a("v-uni-image",{staticStyle:{height:"250rpx",width:"418rpx","margin-bottom":"20rpx"},attrs:{src:t.calcConfig.reward_image}}),a("v-uni-view",{staticClass:"dir-left-nowrap main-center cross-center"},[a("v-uni-image",{staticClass:"box-grow-0",style:{height:t.calcConfig.code_size+"rpx",width:t.calcConfig.code_size+"rpx"},attrs:{src:t.qrcode_url}}),a("v-uni-view",{staticClass:"dir-top-nowrap",staticStyle:{"margin-left":"48rpx"}},[a("v-uni-view",{staticStyle:{"font-size":"34rpx",color:"#333333","font-weight":"bold"}},[t._v("邀请有礼")]),a("v-uni-view",{staticStyle:{color:"#666666","font-size":"26rpx","margin-top":"6rpx"}},[t._v(t._s(t.calcConfig.code_sub_title))]),a("v-uni-view",{staticClass:"dir-left-nowrap cross-center",staticStyle:{color:"#999999","margin-top":"16rpx"}},[a("v-uni-view",{staticStyle:{"font-size":"24rpx"}},[t._v("扫描二维码查看详情")]),a("v-uni-view",{staticClass:"arrow-right"})],1)],1)],1),a("v-uni-view",{staticClass:"btn main-center cross-center",style:{backgroundColor:t.calcConfig.btn_bg,color:t.calcConfig.btn_color,marginTop:t.calcConfig.btn_top+"rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.saveImg.apply(void 0,arguments)}}},[t._v("保存图片分享")])],1):t._e()],1)],1)},r=[]},7888:function(t,e,a){"use strict";a.r(e);var o=a("1890"),i=a.n(o);for(var r in o)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a},aef6:function(t,e,a){"use strict";var o=a("5ca1"),i=a("9def"),r=a("d2c8"),n="endsWith",s=""[n];o(o.P+o.F*a("5147")(n),"String",{endsWith:function(t){var e=r(this,t,n),a=arguments.length>1?arguments[1]:void 0,o=i(e.length),c=void 0===a?o:Math.min(i(a),o),f=String(t);return s?s.call(e,f,c):e.slice(c-f.length,c)===f}})},b0e4:function(t,e,a){e=t.exports=a("24fb")(!1),e.push([t.i,'@charset "UTF-8";.text-center[data-v-5f42b244]{text-align:center}.font-weight[data-v-5f42b244]{font-weight:700}.page-width[data-v-5f42b244]{width:100%}.goods-hover-class[data-v-5f42b244]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-5f42b244]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}\n/*全局文字大小*/\n/* 屏幕宽度*/uni-page-body[data-v-5f42b244]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-5f42b244]{width:100%}.u-hover-class[data-v-5f42b244]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-5f42b244]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.poster .btn[data-v-5f42b244]{font-size:%?32?%;height:%?90?%;width:100%;margin-bottom:%?40?%;border-radius:%?8?%}.poster .absolute-avatar[data-v-5f42b244]{position:absolute;top:%?204?%;width:100%;text-align:center}.poster .avatar[data-v-5f42b244]{border-radius:50%;border:%?6?% solid #fff}.poster .poster-box[data-v-5f42b244]{padding:%?60?% %?52?% 0;background:#fff;border-radius:%?32?%}.poster .arrow-right[data-v-5f42b244]{width:0;height:0;margin-left:%?12?%;border-top:%?12?% rgba(0,0,0,0) dashed;border-bottom:%?12?% rgba(0,0,0,0) dashed;border-left:%?16?% #ccc solid;margin-top:%?6?%}.poster.bg[data-v-5f42b244]{height:100vh;width:100vw;position:absolute;background-size:100vw 100vh;background-repeat:no-repeat}body.?%PAGE?%[data-v-5f42b244]{background:#f7f7f7}',""])},c82f:function(t,e,a){"use strict";a.r(e);var o=a("71f0"),i=a("7888");for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("1b4b");var n,s=a("f0c5"),c=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,"5f42b244",null,!1,o["a"],n);e["default"]=c.exports}}]);