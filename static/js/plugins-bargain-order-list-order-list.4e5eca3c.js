(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["plugins-bargain-order-list-order-list"],{"039d":function(t,i,a){i=t.exports=a("24fb")(!1),i.push([t.i,'@charset "UTF-8";.text-center[data-v-23abfbf1]{text-align:center}.font-weight[data-v-23abfbf1]{font-weight:700}.page-width[data-v-23abfbf1]{width:100%}.goods-hover-class[data-v-23abfbf1]{opacity:.9;background-color:#f7f7f7}.background-image[data-v-23abfbf1]{background-repeat:no-repeat;background-size:100% 100%;background-position:50%}\n/*全局文字大小*/\n/* 屏幕宽度*/uni-page-body[data-v-23abfbf1]{font-size:%?32?%;background:#f7f7f7}.page-width[data-v-23abfbf1]{width:100%}.u-hover-class[data-v-23abfbf1]{opacity:.9;background-color:#f7f7f7}.safe-area-inset-bottom[data-v-23abfbf1]{padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom)}.no-content[data-v-23abfbf1]{padding:%?150?% 0;text-align:center;color:#888}.bargain-list[data-v-23abfbf1]{margin:%?20?% %?24?% 0;border-radius:%?16?%;background:#fff;height:%?256?%}.bargain-list.long[data-v-23abfbf1]{height:%?298?%}.bargain-list uni-image[data-v-23abfbf1]{height:100%;width:%?256?%;display:block;border-top-left-radius:%?16?%;border-bottom-left-radius:%?16?%}.bargain-list .bargain-right[data-v-23abfbf1]{margin:%?16?% %?20?%;min-height:%?216?%}.bargain-list .bargain-time[data-v-23abfbf1]{margin:%?8?% 0;font-size:%?24?%;color:#999}.bargain-list .bargain-time > uni-view[data-v-23abfbf1]:first-of-type{margin-right:%?4?%}.bargain-list .bargain-time .info[data-v-23abfbf1]{margin:0 %?2?%;padding:0 %?5?%;height:%?36?%;background:#f3f3f3;border-radius:%?4?%;line-height:%?36?%}.bargain-list .min-price[data-v-23abfbf1]{color:#999;font-size:%?24?%}.bargain-list .price[data-v-23abfbf1]{color:#ff4544;font-size:%?28?%}.bargain-list .price .price-int[data-v-23abfbf1]{font-size:%?40?%}.bargain-list .bargain-content[data-v-23abfbf1]{color:#666;font-size:%?24?%}.bargain-list .bargain-name[data-v-23abfbf1]{font-size:%?28?%;color:#353535}.bargain-list .attr[data-v-23abfbf1]{color:#999;margin:%?12?% 0 %?4?% 0;font-size:%?24?%;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;width:100%}body.?%PAGE?%[data-v-23abfbf1]{background:#f7f7f7}',""])},"37a1":function(t,i,a){var e=a("039d");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var n=a("4f06").default;n("6e4534eb",e,!0,{sourceMap:!1,shadowMode:!1})},"86bc":function(t,i,a){"use strict";var e=a("4ea4");a("8e6e"),a("456d"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,a("a481"),a("ac6a");var n=e(a("ade3")),r=e(a("2fafe")),o=a("2f62");function s(t,i){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);i&&(e=e.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),a.push.apply(a,e)}return a}function c(t){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?s(Object(a),!0).forEach((function(i){(0,n.default)(t,i,a[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(a,i))}))}return t}var f={name:"order-list",components:{commonButtom:r.default},data:function(){var t;return{integral:t,list:[],args:!1,page:1,load:!1}},computed:c({},(0,o.mapGetters)("mallConfig",{getTheme:"getTheme"})),onReachBottom:function(){var t=this;if(!t.args&&!t.load){t.load=!0;var i=t.page+1;t.$request({url:t.$api.bargain.list,data:{page:i}}).then((function(a){if(0===a.code){var e=[i,0===a.data.list.length];t.page=e[0],t.args=e[1],t.getIntegral(t.list.concat(a.data.list))}t.load=!1}))}},onShow:function(){var t=this;t.$showLoading(),t.$request({url:t.$api.bargain.list}).then((function(i){t.$hideLoading(),0===i.code&&t.getIntegral(i.data.list),t.args=!1,t.page=1})).catch((function(i){t.$hideLoading()}))},onUnload:function(){clearInterval(this.integral)},methods:{navGoods:function(t){uni.navigateTo({url:"/plugins/bargain/goods/goods?goods_id="+t.goods_id})},goto:function(t){uni.navigateTo({url:"/plugins/bargain/activity/activity?id="+t.bargain_order_id})},getIntegral:function(t){var i=this;clearInterval(i.integral);var a=function(){t.forEach((function(t,a,e){if(t.priceList=i.handlePrice(t.now_price==t.min_price?t.min_price:t.reset_price),!t.status){var n=t.finish_at.replace(/-/g,"/"),r=parseInt((new Date(n).getTime()-(new Date).getTime())/1e3),o=0,s=0,c=0,f=0;r>0?(s=Math.floor(r/3600)-24*o,c=Math.floor(r/60)-24*o*60-60*s,f=Math.floor(r)-24*o*60*60-60*s*60-60*c,s=s<10?"0"+s:s,c=c<10?"0"+c:c,f=f<10?"0"+f:f,t.times={day:o,hour:s,minute:c,second:f}):t.times=f}})),i.list=t};a(t),i.integral=setInterval((function(){a(t)}),1e3)},submit:function(t){var i=[{mch_id:0,bargain_order_id:t.bargain_order_id,goods_list:[{id:t.goods_id,attr:[],num:1,cart_id:0,goods_attr_id:t.goods_attr_id}]}];uni.navigateTo({url:"/pages/order-submit/order-submit?mch_list="+JSON.stringify(i)+"&preview_url="+encodeURIComponent(this.$api.bargain.order_preview)+"&submit_url="+encodeURIComponent(this.$api.bargain.order_submit)})}}};i.default=f},b6c4:function(t,i,a){"use strict";var e=a("37a1"),n=a.n(e);n.a},d337:function(t,i,a){"use strict";var e;a.d(i,"b",(function(){return n})),a.d(i,"c",(function(){return r})),a.d(i,"a",(function(){return e}));var n=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("app-layout",[t.list.length?t._e():a("v-uni-view",{staticClass:"no-content"},[a("v-uni-view",[t._v("你还没有进行中的砍价")]),a("v-uni-view",[t._v("去会场逛逛！")])],1),a("v-uni-view",{staticClass:"order-list"},[t._l(t.list,(function(i,e){return[a("v-uni-view",{key:e+"_0",staticClass:"bargain-list dir-left-nowrap",class:i.reset_time?"long":"",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.navGoods(i)}}},[a("v-uni-view",{staticClass:"box-grow-0"},[a("v-uni-image",{attrs:{src:i.cover_pic}})],1),a("v-uni-view",{staticClass:"box-grow-1 dir-top-nowrap bargain-right"},[a("v-uni-view",{staticClass:"box-grow-0 bargain-name t-omit-two"},[t._v(t._s(i.goods_name))]),a("v-uni-view",{staticClass:"box-grow-0 attr"},[t._v(t._s(i.select_attr_group_text))]),i.reset_time?[a("v-uni-view",{staticClass:"box-grow-1 bargain-time dir-left-nowrap cross-center"},[a("v-uni-view",[t._v("距结束")]),a("v-uni-view",{staticClass:"info"},[t._v(t._s(i.times.hour))]),a("v-uni-view",[t._v(":")]),a("v-uni-view",{staticClass:"info"},[t._v(t._s(i.times.minute))]),a("v-uni-view",[t._v(":")]),a("v-uni-view",{staticClass:"info"},[t._v(t._s(i.times.second))])],1),a("v-uni-view",{staticClass:"box-grow-0 dir-left-nowrap cross-center"},[a("v-uni-view",{staticClass:"box-grow-1 dir-top-nowrap"},[a("v-uni-view",{staticClass:"min-price"},[i.now_price==i.min_price?[t._v("已砍至最低")]:[t._v("离最低￥"+t._s(i.min_price))]],2),a("v-uni-view",{staticClass:"price"},[a("v-uni-text",{staticClass:"price-float"},[t._v(t._s(i.now_price!=i.min_price?"还差":"")+"￥")]),a("v-uni-text",{staticClass:"price-int"},[t._v(t._s(i.priceList.priceInt))]),a("v-uni-text",{staticClass:"price-float"},[t._v(t._s(i.priceList.priceFloat))])],1)],1),a("v-uni-view",{staticClass:"box-grow-0"},[i.now_price==i.min_price?a("app-button",{attrs:{height:"48",width:"120",color:"#FFFFFF","font-size":"24",theme:t.getTheme,roundSize:"4rpx",padding:"0"},nativeOn:{click:function(a){return a.stopPropagation(),t.submit(i)}}},[t._v("立即购买")]):a("app-button",{attrs:{height:"48",roundSize:"4rpx",padding:"0",width:"120",color:"#FFFFFF","font-size":"24",theme:t.getTheme},nativeOn:{click:function(a){return a.stopPropagation(),t.goto(i)}}},[t._v("继续砍价")])],1)],1)]:[a("v-uni-view",{staticClass:"box-grow-1 dir-top-nowrap main-between"},[a("v-uni-view",{staticClass:"box-grow-1 bargain-content"},[t._v(t._s(i.content))]),a("v-uni-view",{staticClass:"box-grow-0 price"},[t._v(t._s(i.status_content)),1==i.status?a("v-uni-text",{staticClass:"price-float"},[t._v("￥")]):t._e(),1==i.status?a("v-uni-text",{staticClass:"price-int"},[t._v(t._s(i.priceList.priceInt))]):t._e(),1==i.status?a("v-uni-text",{staticClass:"price-float"},[t._v(t._s(i.priceList.priceFloat))]):t._e()],1)],1)]],2)],1)]}))],2),a("common-buttom",{attrs:{theme:t.getTheme,status:"prize"}})],1)},r=[]},f61e:function(t,i,a){"use strict";a.r(i);var e=a("d337"),n=a("fdb5");for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(i,t,(function(){return n[t]}))}(r);a("b6c4");var o,s=a("f0c5"),c=Object(s["a"])(n["default"],e["b"],e["c"],!1,null,"23abfbf1",null,!1,e["a"],o);i["default"]=c.exports},fdb5:function(t,i,a){"use strict";a.r(i);var e=a("86bc"),n=a.n(e);for(var r in e)["default"].indexOf(r)<0&&function(t){a.d(i,t,(function(){return e[t]}))}(r);i["default"]=n.a}}]);